import{r as e,o as a,e as o,ar as l,as as r,av as s,aw as n,aH as d,i as t,c3 as u,aG as p,E as i,aY as c,b5 as m,aI as f,ba as v}from"./.pnpm-B5NcQQUZ.js";import{_,u as h,q as g}from"./index-9TLdUthr.js";import{u as b}from"./useForm-BAG80Yrx.js";const w={class:"send-code"},y=_({__name:"phone-form",setup(_){const{formData:y,formRef:V}=b({phone:"",code:""}),{login:I}=h(),k=e(0),x={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(e,a,o)=>{g(a)?o():o(new Error("手机号格式不正确"))}}],code:[{required:!0,message:"请填写验证码",trigger:"blur"}]};let j=null;async function q(){await V.value.validate();const e=y.vlaue;I({username:e.phone,password:e.code})}function C(){if(!g(y.value.phone))return i.warning("手机号格式不正确");k.value>0||(k.value=60,j=setInterval((()=>{k.value--,k.value<=0&&clearInterval(j)}),1e3))}return a((()=>j&&clearInterval(j))),(e,a)=>{const i=c,_=m,h=f,g=v;return o(),l(g,{ref_key:"formRef",ref:V,model:n(y),rules:x,size:"large"},{default:r((()=>[s(_,{prop:"phone"},{default:r((()=>[s(i,{modelValue:n(y).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>n(y).phone=e),placeholder:"请输入手机号","prefix-icon":"Cellphone"},{prepend:r((()=>a[2]||(a[2]=[d("+86")]))),_:1},8,["modelValue"])])),_:1}),s(_,{prop:"code"},{default:r((()=>[t("div",w,[s(i,{modelValue:n(y).code,"onUpdate:modelValue":a[1]||(a[1]=e=>n(y).code=e),placeholder:"请输入验证码","prefix-icon":"Lock",onKeyup:u(q,["enter"])},null,8,["modelValue"]),s(h,{disabled:n(k)>0,onClick:C},{default:r((()=>[d(p(n(k)>0?`${n(k)} s`:"发送验证码"),1)])),_:1},8,["disabled"])])])),_:1}),s(_,null,{default:r((()=>[s(h,{type:"primary",style:{width:"100%"},onClick:q},{default:r((()=>a[3]||(a[3]=[d("登录")]))),_:1})])),_:1})])),_:1},8,["model"])}}},[["__scopeId","data-v-6b2c5bea"]]);export{y as default};
