import{r as e,bq as a,a3 as o,a4 as l,a5 as r,a8 as s,aa as n,ap as d,af as t,bY as u,ao as p,E as i,aI as c,aS as m,aq as f,aX as v}from"./.pnpm-BO0thPis.js";import{_,u as h,q as g}from"./index-D91Jtym3.js";import{u as b}from"./useForm-D2EwfXUI.js";const y={class:"send-code"},V=_({__name:"phone-form",setup(_){const{formData:V,formRef:q}=b({phone:"",code:""}),{login:w}=h(),I=e(0),k={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(e,a,o)=>{g(a)?o():o(new Error("手机号格式不正确"))}}],code:[{required:!0,message:"请填写验证码",trigger:"blur"}]};let x=null;async function j(){await q.value.validate();const e=V.vlaue;w({username:e.phone,password:e.code})}function C(){if(!g(V.value.phone))return i.warning("手机号格式不正确");I.value>0||(I.value=60,x=setInterval((()=>{I.value--,I.value<=0&&clearInterval(x)}),1e3))}return a((()=>x&&clearInterval(x))),(e,a)=>{const i=c,_=m,h=f,g=v;return o(),l(g,{ref_key:"formRef",ref:q,model:n(V),rules:k,size:"large"},{default:r((()=>[s(_,{prop:"phone"},{default:r((()=>[s(i,{modelValue:n(V).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>n(V).phone=e),placeholder:"请输入手机号","prefix-icon":"Cellphone"},{prepend:r((()=>a[2]||(a[2]=[d("+86")]))),_:1},8,["modelValue"])])),_:1}),s(_,{prop:"code"},{default:r((()=>[t("div",y,[s(i,{modelValue:n(V).code,"onUpdate:modelValue":a[1]||(a[1]=e=>n(V).code=e),placeholder:"请输入验证码","prefix-icon":"Lock",onKeyup:u(j,["enter"])},null,8,["modelValue"]),s(h,{disabled:n(I)>0,onClick:C},{default:r((()=>[d(p(n(I)>0?`${n(I)} s`:"发送验证码"),1)])),_:1},8,["disabled"])])])),_:1}),s(_,null,{default:r((()=>[s(h,{type:"primary",style:{width:"100%"},onClick:j},{default:r((()=>a[3]||(a[3]=[d("登录")]))),_:1})])),_:1})])),_:1},8,["model"])}}},[["__scopeId","data-v-6b2c5bea"]]);export{V as default};
