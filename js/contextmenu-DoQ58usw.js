import{_ as e,e as n}from"./index-CjL9fGc7.js";import{h as t,aJ as a,aS as l,aK as o,ab as s,bT as i,ac as u,an as c,ai as d,ad as v,ah as m,ae as r,aj as f,af as p,ak as x,aM as b,aX as h,aN as w,at as y,ao as E,ax as k,aT as g,bU as L}from"./.pnpm-BLGzruUg.js";function _(e){const n=t(0),s=t(0),i=t(!1);function u(e){e.preventDefault(),e.stopPropagation(),n.value=e.clientX,s.value=e.clientY,i.value=function(e){const n=d(),t=null==n?void 0:n.getBoundingClientRect(),a=e.clientX,l=e.clientY;return a>=t.left&&a<=t.right&&l>=t.top&&l<=t.bottom}(e)}function c(){i.value=!1}function d(){const n=e.value;return n&&n.children?null==n?void 0:n.children[0]:null}return a((async()=>{await l();const e=d();null==e||e.addEventListener("contextmenu",u),window.addEventListener("click",c),window.addEventListener("contextmenu",c)})),o((()=>{const e=d();null==e||e.removeEventListener("contextmenu",u),window.removeEventListener("click",c),window.removeEventListener("contextmenu",c)})),{x:n,y:s,visible:i}}const X=t(document.documentElement.clientWidth),z=t(document.documentElement.clientHeight);window.addEventListener("resize",(()=>{X.value=document.documentElement.clientWidth,z.value=document.documentElement.clientHeight}));const Y=["onClick"],j=e({__name:"contextmenu",props:{menus:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:a}){const l=a,o=t(null),j=t(0),C=t(0),{visible:H,x:R,y:T}=_(o),{vw:W,vh:A}={vw:X,vh:z},B=s((()=>{let e=R.value,n=T.value;const t=j.value,a=C.value;return e>W.value-t&&(e-=t),n>A.value-a&&(e=A.value-a),{posX:e,posY:n}}));function D(e){j.value=e.width,C.value=e.height}return(t,a)=>{const s=n,_=i("size-observe");return u(),c("div",{ref_key:"containerRef",ref:o},[d(t.$slots,"default",{},void 0,!0),(u(),v(L,{to:"body"},[m(g,{name:"el-zoom-in-top"},{default:r((()=>[f(H)?p((u(),c("div",{key:0,class:"context-menu--box",style:x({left:f(B).posX+"px",top:f(B).posY+"px"})},[(u(!0),c(b,null,h(e.menus,((e,n)=>(u(),c("div",{key:n,class:w(["context-menu--item","flex",{"is-disabled":e.disabled}]),onClick:t=>function(e,n){e.disabled||(l("select",{...e,index:n}),H.value=!1)}(e,n)},[e.icon?(u(),v(s,{key:0,name:e.icon,size:"16",class:"context-menu--item-icon"},null,8,["name"])):y("",!0),E("div",null,k(e.label),1)],10,Y)))),128))],4)),[[_,D]]):y("",!0)])),_:1})]))],512)}}},[["__scopeId","data-v-db80f15a"]]);export{j as default};
