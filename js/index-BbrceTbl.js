import{r as e,a2 as a,bt as l,E as o,a3 as r,ae as d,af as s,a8 as u,a5 as t,al as n,aa as c,aH as p,ac as i,aD as m,ap as f,ao as w,a4 as b,aL as v,aV as g,aq as V,bu as _,aE as h,aF as P}from"./.pnpm-DSXWUmMM.js";import{q as y,_ as k,a as q}from"./index-CMBT9BYn.js";import{u as x}from"./useForm-D-WJXbO_.js";import{C}from"./card-form-Bg7aAccG.js";const U={class:"forget"},j={class:"forget-header"},I=(e=>(h("data-v-9ee9551b"),e=e(),P(),e))((()=>s("h4",null,"忘记密码",-1))),$={class:"card-wrapper flex"},E={class:"send-code"},D=k({__name:"index",setup(h){const{formData:P,formRef:k,formConfig:D}=x({account:"",phone:"",code:"",newPwd:"",confirmPwd:""},{labelWidth:100}),{disabled:F,buttonText:R,sendCode:T}=function(){const r=e(0);let d=null;const s=a((()=>r.value>0)),u=a((()=>{const e=r.value;return e>0?`${e}s后重新发送`:"发送验证码"}));return l((()=>d&&clearInterval(d))),{countdown:r,disabled:s,buttonText:u,sendCode:function(e){if(!y(e))return o.warning("手机号格式不正确");r.value>0||(r.value=60,d=setInterval((()=>{r.value--,r.value<=0&&clearInterval(d)}),1e3))}}}(),B=e(!1),H={account:[{required:!0,message:"请输入账号",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(e,a,l)=>{a!==P.value.newPwd?l(new Error("两次输入的密码不一致")):l()}}]};async function L(){await k.value.validate(),B.value=!0}return(e,a)=>{const l=i,o=v,h=g,y=V,x=_;return r(),d("div",U,[s("div",j,[u(l,{onBack:a[0]||(a[0]=a=>e.$router.go(-1))},{content:t((()=>[I])),_:1})]),s("div",$,[u(c(C),n({ref_key:"formRef",ref:k,modelValue:c(P),"onUpdate:modelValue":a[8]||(a[8]=e=>p(P)?P.value=e:null),rules:H,class:"card-form"},c(D)),{default:t((()=>[c(B)?(r(),b(x,{key:1,icon:"success",title:"密码重置成功","sub-title":"可以使用新密码登录了"},{extra:t((()=>[u(y,{type:"primary",onClick:a[7]||(a[7]=a=>e.$router.replace(`/${c(q)}`))},{default:t((()=>[f("返回登录")])),_:1})])),_:1})):(r(),d(m,{key:0},[u(h,{label:"账号",prop:"account"},{default:t((()=>[u(o,{modelValue:c(P).account,"onUpdate:modelValue":a[1]||(a[1]=e=>c(P).account=e),placeholder:"注册时填写的登录账号"},null,8,["modelValue"])])),_:1}),u(h,{label:"手机号",prop:"phone"},{default:t((()=>[u(o,{modelValue:c(P).phone,"onUpdate:modelValue":a[2]||(a[2]=e=>c(P).phone=e),placeholder:"注册时填写的手机号"},null,8,["modelValue"])])),_:1}),u(h,{label:"验证码",prop:"code"},{default:t((()=>[s("div",E,[u(o,{modelValue:c(P).code,"onUpdate:modelValue":a[3]||(a[3]=e=>c(P).code=e),placeholder:"手机验证码"},null,8,["modelValue"]),u(y,{disabled:c(F),onClick:a[4]||(a[4]=e=>c(T)(c(P).phone))},{default:t((()=>[f(w(c(R)),1)])),_:1},8,["disabled"])])])),_:1}),u(h,{label:"新密码",prop:"newPwd"},{default:t((()=>[u(o,{modelValue:c(P).newPwd,"onUpdate:modelValue":a[5]||(a[5]=e=>c(P).newPwd=e),"show-password":"",placeholder:"填写新的登录密码",type:"password"},null,8,["modelValue"])])),_:1}),u(h,{label:"确认新密码",prop:"confirmPwd"},{default:t((()=>[u(o,{modelValue:c(P).confirmPwd,"onUpdate:modelValue":a[6]||(a[6]=e=>c(P).confirmPwd=e),"show-password":"",placeholder:"再次确认新密码",type:"password"},null,8,["modelValue"])])),_:1}),u(h,null,{default:t((()=>[u(y,{type:"primary",onClick:L},{default:t((()=>[f("提交")])),_:1})])),_:1})],64))])),_:1},16,["modelValue"])])])}}},[["__scopeId","data-v-9ee9551b"]]);export{D as default};
