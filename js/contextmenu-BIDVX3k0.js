import{_ as e,e as n}from"./index-DZ8Xxrs2.js";import{r as t,aR as a,aZ as s,aS as l,c as o,bY as i,e as u,f as c,h as d,ar as v,av as r,as as m,aw as f,at as p,n as x,F as w,g as b,aU as h,j as y,i as E,aG as g,a_ as k,bZ as _}from"./.pnpm-B5NcQQUZ.js";function L(e){const n=t(0),o=t(0),i=t(!1);function u(e){e.preventDefault(),e.stopPropagation(),n.value=e.clientX,o.value=e.clientY,i.value=function(e){const n=d(),t=null==n?void 0:n.getBoundingClientRect(),a=e.clientX,s=e.clientY;return a>=t.left&&a<=t.right&&s>=t.top&&s<=t.bottom}(e)}function c(){i.value=!1}function d(){const n=e.value;return n&&n.children?null==n?void 0:n.children[0]:null}return a((async()=>{await s();const e=d();null==e||e.addEventListener("contextmenu",u),window.addEventListener("click",c),window.addEventListener("contextmenu",c)})),l((()=>{const e=d();null==e||e.removeEventListener("contextmenu",u),window.removeEventListener("click",c),window.removeEventListener("contextmenu",c)})),{x:n,y:o,visible:i}}const Y=t(document.documentElement.clientWidth),z=t(document.documentElement.clientHeight);window.addEventListener("resize",(()=>{Y.value=document.documentElement.clientWidth,z.value=document.documentElement.clientHeight}));const X=["onClick"],j=e({__name:"contextmenu",props:{menus:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:a}){const s=a,l=t(null),j=t(0),C=t(0),{visible:R,x:H,y:W}=L(l),{vw:Z,vh:A}={vw:Y,vh:z},B=o((()=>{let e=H.value,n=W.value;const t=j.value,a=C.value;return e>Z.value-t&&(e-=t),n>A.value-a&&(e=A.value-a),{posX:e,posY:n}}));function D(e){j.value=e.width,C.value=e.height}return(t,a)=>{const o=n,L=i("size-observe");return u(),c("div",{ref_key:"containerRef",ref:l},[d(t.$slots,"default",{},void 0,!0),(u(),v(_,{to:"body"},[r(k,{name:"el-zoom-in-top"},{default:m((()=>[f(R)?p((u(),c("div",{key:0,class:"context-menu--box",style:x({left:f(B).posX+"px",top:f(B).posY+"px"})},[(u(!0),c(w,null,b(e.menus,((e,n)=>(u(),c("div",{key:n,class:h(["context-menu--item","flex",{"is-disabled":e.disabled}]),onClick:t=>function(e,n){e.disabled||(s("select",{...e,index:n}),R.value=!1)}(e,n)},[e.icon?(u(),v(o,{key:0,name:e.icon,size:"16",class:"context-menu--item-icon"},null,8,["name"])):y("",!0),E("div",null,g(e.label),1)],10,X)))),128))],4)),[[L,D]]):y("",!0)])),_:1})]))],512)}}},[["__scopeId","data-v-db80f15a"]]);export{j as default};
