import{n as e,d as a,R as l,e as t,x as n}from"./index-9TLdUthr.js";import{r as o,aR as r,e as s,ar as i,as as m,av as p,aw as d,j as u,aH as c,aG as h,aV as f,b2 as y,bH as b,aI as v}from"./.pnpm-B5NcQQUZ.js";import{u as j}from"./useModal-B_iEuiqH.js";import _ from"./index-M8tU9IPl.js";import w from"./preview-meta-modal-BygmfcIf.js";import"./index-D_EVUujl.js";import"./useForm-BAG80Yrx.js";const x={__name:"index",setup(x){const{visible:C,modalData:I,open:k}=j(),V=o([]),R=[{slot:"label",label:"菜单名称",showOverflowTooltip:!0},{slot:"type",label:"菜单类型"},{prop:"path",label:"路由path"},{prop:"name",label:"路由name"},{prop:"component",label:"组件路径"},{slot:"action",label:"查看meta说明"}].map((e=>({...e,align:"left"})));function g(e){return e.map((e=>({...e,component:e.component||e.path,label:e.meta.title,hasChildren:e.children&&e.children.length,children:e.children?g(e.children):null})))}return r((async()=>{const a=await e();V.value=g(a)})),(e,o)=>{const r=t,j=y,x=b,g=v,E=n;return s(),i(E,null,{default:m((()=>[p(d(_),{data:d(V),columns:d(R),border:!1,"tree-props":{children:"children",hasChildren:"hasChildren"},load:(e,a,l)=>l(e.children),"row-key":"name",lazy:""},{label:m((({item:e})=>[p(j,null,{default:m((()=>{var l;return[e.meta.icon?(s(),i(r,{key:0,name:e.meta.icon,type:(null==(l=e.meta)?void 0:l.iconType)||d(a).EL_ICON},null,8,["name","type"])):u("",!0),c(" "+h(e.label),1)]})),_:2},1024)])),type:m((({item:e})=>{var a;return[p(x,{effect:"plain",type:[d(l).LINK,d(l).IFRAME].includes(null==(a=e.meta)?void 0:a.type)?"warning":"success"},{default:m((()=>{var a,t;return[c(h((t=null==(a=e.meta)?void 0:a.type,{[l.LINK]:"外链",[l.IFRAME]:"内嵌"}[t]||"菜单")),1)]})),_:2},1032,["type"])]})),action:m((({item:e})=>[p(g,{type:"primary",icon:"View",link:"",onClick:a=>d(k)(e.meta)},{default:m((()=>o[1]||(o[1]=[c("meta配置")]))),_:2},1032,["onClick"])])),_:1},8,["data","columns","load"]),p(d(w),{modelValue:d(C),"onUpdate:modelValue":o[0]||(o[0]=e=>f(C)?C.value=e:null),meta:d(I)},null,8,["modelValue","meta"])])),_:1})}}};export{x as default};
