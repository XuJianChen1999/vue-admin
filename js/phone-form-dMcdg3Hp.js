import{h as e,bz as a,ac as o,ad as l,ae as r,ah as s,aj as n,ay as d,ao as t,b_ as u,ax as p,E as i,aR as c,a$ as m,az as f,b4 as h}from"./.pnpm-BLGzruUg.js";import{_ as v,u as _,q as b}from"./index-CjL9fGc7.js";import{u as g}from"./useForm-_BcR63q1.js";const y={class:"send-code"},V=v({__name:"phone-form",setup(v){const{formData:V,formRef:w}=g({phone:"",code:""}),{login:x}=_(),j=e(0),k={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(e,a,o)=>{b(a)?o():o(new Error("手机号格式不正确"))}}],code:[{required:!0,message:"请填写验证码",trigger:"blur"}]};let I=null;async function q(){await w.value.validate();const e=V.vlaue;x({username:e.phone,password:e.code})}function z(){if(!b(V.value.phone))return i.warning("手机号格式不正确");j.value>0||(j.value=60,I=setInterval((()=>{j.value--,j.value<=0&&clearInterval(I)}),1e3))}return a((()=>I&&clearInterval(I))),(e,a)=>{const i=c,v=m,_=f,b=h;return o(),l(b,{ref_key:"formRef",ref:w,model:n(V),rules:k,size:"large"},{default:r((()=>[s(v,{prop:"phone"},{default:r((()=>[s(i,{modelValue:n(V).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>n(V).phone=e),placeholder:"请输入手机号","prefix-icon":"Cellphone"},{prepend:r((()=>a[2]||(a[2]=[d("+86")]))),_:1},8,["modelValue"])])),_:1}),s(v,{prop:"code"},{default:r((()=>[t("div",y,[s(i,{modelValue:n(V).code,"onUpdate:modelValue":a[1]||(a[1]=e=>n(V).code=e),placeholder:"请输入验证码","prefix-icon":"Lock",onKeyup:u(q,["enter"])},null,8,["modelValue"]),s(_,{disabled:n(j)>0,onClick:z},{default:r((()=>[d(p(n(j)>0?`${n(j)} s`:"发送验证码"),1)])),_:1},8,["disabled"])])])),_:1}),s(v,null,{default:r((()=>[s(_,{type:"primary",style:{width:"100%"},onClick:q},{default:r((()=>a[3]||(a[3]=[d("登录")]))),_:1})])),_:1})])),_:1},8,["model"])}}},[["__scopeId","data-v-6b2c5bea"]]);export{V as default};
