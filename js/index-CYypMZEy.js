import{_ as e,x as t}from"./index-CMBT9BYn.js";import{r as n,aA as a,a3 as o,ae as s,af as i,aa as u,a9 as c,a8 as l,a5 as r,ap as d,E as h,aq as f,a4 as v}from"./.pnpm-DSXWUmMM.js";const m={class:"canvas-box"},p=["width","height"],g={class:"btn-box"},y=e({__name:"index",props:{height:{type:[String,Number],default:300},lineWidth:{type:[String,Number],default:3}},emits:["clear","save"],setup(e,{emit:t}){const v=e,y=t,_=n(null),x=n(!1),b=n(0),C="ontouchstart"in document?"touchstart":"mousedown",R="ontouchmove"in document?"touchmove":"mousemove",X="ontouchend"in document?"touchend":"mouseup";let Y;function w(){if(!x.value)return h.warning("无内容");y("save",_.value.toDataURL())}function E(){x.value=!1,Y.clearRect(0,0,Y.canvas.width,Y.canvas.height),y("clear")}return a((()=>function(){b.value=document.querySelector(".canvas-box").clientWidth;const e=_.value;let t;Y=e.getContext("2d"),e.addEventListener(C,(n=>{n.preventDefault(),t=!0;const a=n.touches?n.touches[0].clientX-e.getBoundingClientRect().left:n.offsetX||n.layerX,o=n.touches?n.touches[0].clientY-e.getBoundingClientRect().top:n.offsetY||n.layerY;Y.lineWidth=+v.lineWidth,Y.beginPath(),Y.moveTo(a,o)})),e.addEventListener(R,(n=>{if(t){n.preventDefault(),x.value=!0;const t=n.touches?n.touches[0].clientX-e.getBoundingClientRect().left:n.offsetX||n.layerX,a=n.touches?n.touches[0].clientY-e.getBoundingClientRect().top:n.offsetY||n.layerY;Y.lineTo(t,a),Y.stroke()}}),!1),e.addEventListener(X,(()=>t=!1)),e.addEventListener("mouseleave",(()=>t=!1))}())),(t,n)=>{const a=f;return o(),s("div",m,[i("canvas",{ref_key:"canvasRef",ref:_,crossOrigin:"anoymous",width:u(b),height:e.height},null,8,p),c(t.$slots,"action",{},(()=>[i("div",g,[l(a,{onClick:E},{default:r((()=>[d("清空")])),_:1}),l(a,{type:"primary",onClick:w},{default:r((()=>[d("保存")])),_:1})])]),!0)])}}},[["__scopeId","data-v-64155a78"]]),_={__name:"index",setup(e){function n(e){}return(e,a)=>{const s=t;return o(),v(s,null,{default:r((()=>[l(u(y),{onSave:n})])),_:1})}}};export{_ as default};
