import{a3 as e,ae as a,a8 as t,a5 as l,aa as s,ap as r,ao as n,af as i,a4 as o,ak as p,aH as m,aD as d,aK as u,aW as c,bw as f,bd as y,aq as b,c8 as v}from"./.pnpm-DSXWUmMM.js";import{U as h,a as x,_}from"./edit-user-DcuJeEoS.js";import{u as w}from"./useModal-xs4tASz_.js";import j from"./index-B4S_DUQr.js";import{I as k}from"./index-n3Ekktf_.js";import"./useForm-D-WJXbO_.js";import"./drawer-DJFR9MNW.js";import"./index-CMBT9BYn.js";const g={style:{cursor:"pointer"}},S={__name:"user-table",props:{data:{type:Array,default:()=>[]}},setup(S){const{visible:V,modalData:$,open:C}=w(),D=[{label:"姓名",prop:"name"},{label:"头像",slot:"avatar"},{label:"是否在线",slot:"online"},{label:"部门",slot:"departmentName"},{label:"禁用",slot:"enable"},{label:"密码",prop:"password"},{label:"手机号",slot:"phone",width:120},{label:"性别",slot:"sex"},{label:"用户类型",slot:"type",width:120},{label:"创建时间",prop:"createTime",width:120},{label:"操作",slot:"handler",fixed:"right",width:210}];return(w,N)=>{const U=u,z=c,q=f,A=y,B=b,E=v;return e(),a(d,null,[t(s(j),{data:S.data,columns:D,border:!1},{online:l((({item:e})=>[t(s(k),{type:e.status?"success":"danger",size:6},null,8,["type"])])),avatar:l((({item:e})=>[t(U,{src:e.avatarUrl,size:40},null,8,["src"])])),enable:l((({item:e})=>[t(z,{"model-value":e.enable,"active-value":1,"inactive-value":0,"active-text":"启用","inactive-text":"禁用","inline-prompt":""},null,8,["model-value"])])),type:l((({item:e})=>{return[t(q,{type:(a=e.type,{[x.Staff]:"primary",[x.Service]:"primary",[x.Customer]:"success",[x.Supplier]:"success",[x.Visitor]:"info",[x.BlackList]:"danger"}[a]||"warning")},{default:l((()=>[r(n(s(h)[e.type]||"未知"),1)])),_:2},1032,["type"])];var a})),phone:l((({item:e,index:a})=>[t(A,{content:e.phone,placement:0===a?"top":a+1===S.data.length?"bottom":"left-start"},{reference:l((()=>{return[i("span",g,n((a=e.phone,`${null==a?void 0:a.slice(0,3)}****${null==a?void 0:a.slice(-4)}`)),1)];var a})),_:2},1032,["content","placement"])])),sex:l((({item:e})=>[t(q,{type:1===e.sex?"primary":"success",effect:"plain"},{default:l((()=>[r(n(1===e.sex?"男":"女"),1)])),_:2},1032,["type"])])),departmentName:l((({item:e})=>[r(n(e.type!==s(x).Staff?"-":e.departmentName),1)])),handler:l((({item:a})=>[t(B,{type:"primary",icon:"Edit",link:"",onClick:e=>s(C)(a)},{default:l((()=>[r("编辑")])),_:2},1032,["onClick"]),"admin"===a.name?(e(),o(B,{key:0,type:"primary",icon:"Plus",link:""},{default:l((()=>[r("新增")])),_:1})):p("",!0),t(E,{title:`确定要删除 ${a.name} 吗？`,width:"210","confirm-button-type":"danger"},{reference:l((()=>[t(B,{link:"",type:"danger",icon:"Delete"},{default:l((()=>[r("删除")])),_:1})])),_:2},1032,["title"])])),_:1},8,["data"]),t(s(_),{modelValue:s(V),"onUpdate:modelValue":N[0]||(N[0]=e=>m(V)?V.value=e:null),user:s($)},null,8,["modelValue","user"])],64)}}};export{S as default};
