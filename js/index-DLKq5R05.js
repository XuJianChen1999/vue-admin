import{n as a,d as e,R as l,e as t,x as n}from"./index-CjL9fGc7.js";import{h as o,aJ as r,ac as i,ad as s,ae as m,ah as p,aj as d,at as u,ay as c,ax as h,aO as y,aY as f,bC as b,az as v}from"./.pnpm-BLGzruUg.js";import{u as j}from"./useModal-ButRR0-F.js";import _ from"./index-C-fNoG01.js";import w from"./preview-meta-modal-CQ6xJDOn.js";import"./index-IL8B7SIk.js";import"./useForm-_BcR63q1.js";const x={__name:"index",setup(x){const{visible:C,modalData:k,open:I}=j(),V=o([]),g=[{slot:"label",label:"菜单名称",showOverflowTooltip:!0},{slot:"type",label:"菜单类型"},{prop:"path",label:"路由path"},{prop:"name",label:"路由name"},{prop:"component",label:"组件路径"},{slot:"action",label:"查看meta说明"}].map((a=>({...a,align:"left"})));function E(a){return a.map((a=>({...a,component:a.component||a.path,label:a.meta.title,hasChildren:a.children&&a.children.length,children:a.children?E(a.children):null})))}return r((async()=>{const e=await a();V.value=E(e)})),(a,o)=>{const r=t,j=f,x=b,E=v,F=n;return i(),s(F,null,{default:m((()=>[p(d(_),{data:d(V),columns:d(g),border:!1,"tree-props":{children:"children",hasChildren:"hasChildren"},load:(a,e,l)=>l(a.children),"row-key":"name",lazy:""},{label:m((({item:a})=>[p(j,null,{default:m((()=>{var l;return[a.meta.icon?(i(),s(r,{key:0,name:a.meta.icon,type:(null==(l=a.meta)?void 0:l.iconType)||d(e).EL_ICON},null,8,["name","type"])):u("",!0),c(" "+h(a.label),1)]})),_:2},1024)])),type:m((({item:a})=>{var e;return[p(x,{effect:"plain",type:[d(l).LINK,d(l).IFRAME].includes(null==(e=a.meta)?void 0:e.type)?"warning":"success"},{default:m((()=>{var e,t;return[c(h((t=null==(e=a.meta)?void 0:e.type,{[l.LINK]:"外链",[l.IFRAME]:"内嵌"}[t]||"菜单")),1)]})),_:2},1032,["type"])]})),action:m((({item:a})=>[p(E,{type:"primary",icon:"View",link:"",onClick:e=>d(I)(a.meta)},{default:m((()=>o[1]||(o[1]=[c("meta配置")]))),_:2},1032,["onClick"])])),_:1},8,["data","columns","load"]),p(d(w),{modelValue:d(C),"onUpdate:modelValue":o[0]||(o[0]=a=>y(C)?C.value=a:null),meta:d(k)},null,8,["modelValue","meta"])])),_:1})}}};export{x as default};
