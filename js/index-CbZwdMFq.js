import{_ as e,x as t}from"./index-DZ8Xxrs2.js";import{r as n,aR as a,e as o,f as s,i,aw as u,h as c,av as l,as as r,aH as d,E as h,aI as f,ar as v}from"./.pnpm-B5NcQQUZ.js";const m={class:"canvas-box"},g=["width","height"],p={class:"btn-box"},y=e({__name:"index",props:{height:{type:[String,Number],default:300},lineWidth:{type:[String,Number],default:3}},emits:["clear","save"],setup(e,{emit:t}){const v=e,y=t,_=n(null),x=n(!1),R=n(0),b="ontouchstart"in document?"touchstart":"mousedown",C="ontouchmove"in document?"touchmove":"mousemove",w="ontouchend"in document?"touchend":"mouseup";let X;function Y(){if(!x.value)return h.warning("无内容");y("save",_.value.toDataURL())}function E(){x.value=!1,X.clearRect(0,0,X.canvas.width,X.canvas.height),y("clear")}return a((()=>function(){R.value=document.querySelector(".canvas-box").clientWidth;const e=_.value;let t;X=e.getContext("2d"),e.addEventListener(b,(n=>{n.preventDefault(),t=!0;const a=n.touches?n.touches[0].clientX-e.getBoundingClientRect().left:n.offsetX||n.layerX,o=n.touches?n.touches[0].clientY-e.getBoundingClientRect().top:n.offsetY||n.layerY;X.lineWidth=+v.lineWidth,X.beginPath(),X.moveTo(a,o)})),e.addEventListener(C,(n=>{if(t){n.preventDefault(),x.value=!0;const t=n.touches?n.touches[0].clientX-e.getBoundingClientRect().left:n.offsetX||n.layerX,a=n.touches?n.touches[0].clientY-e.getBoundingClientRect().top:n.offsetY||n.layerY;X.lineTo(t,a),X.stroke()}}),!1),e.addEventListener(w,(()=>t=!1)),e.addEventListener("mouseleave",(()=>t=!1))}())),(t,n)=>{const a=f;return o(),s("div",m,[i("canvas",{ref_key:"canvasRef",ref:_,crossOrigin:"anoymous",width:u(R),height:e.height},null,8,g),c(t.$slots,"action",{},(()=>[i("div",p,[l(a,{onClick:E},{default:r((()=>n[0]||(n[0]=[d("清空")]))),_:1}),l(a,{type:"primary",onClick:Y},{default:r((()=>n[1]||(n[1]=[d("保存")]))),_:1})])]),!0)])}}},[["__scopeId","data-v-64155a78"]]),_={__name:"index",setup(e){function n(e){}return(e,a)=>{const s=t;return o(),v(s,null,{default:r((()=>[l(u(y),{onSave:n})])),_:1})}}};export{_ as default};
