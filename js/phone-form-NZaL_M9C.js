import{r as e,bt as a,a3 as o,a4 as l,a5 as r,a8 as s,aa as n,ap as d,af as t,aI as u,ao as p,E as i,aL as c,aV as m,aq as f,a_ as v}from"./.pnpm-DSXWUmMM.js";import{_,u as h,q as g}from"./index-CMBT9BYn.js";import{u as b}from"./useForm-D-WJXbO_.js";const V={class:"send-code"},y=_({__name:"phone-form",setup(_){const{formData:y,formRef:w}=b({phone:"",code:""}),{login:I}=h(),k=e(0),q={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(e,a,o)=>{g(a)?o():o(new Error("手机号格式不正确"))}}],code:[{required:!0,message:"请填写验证码",trigger:"blur"}]};let x=null;async function j(){await w.value.validate();const e=y.vlaue;I({username:e.phone,password:e.code})}function C(){if(!g(y.value.phone))return i.warning("手机号格式不正确");k.value>0||(k.value=60,x=setInterval((()=>{k.value--,k.value<=0&&clearInterval(x)}),1e3))}return a((()=>x&&clearInterval(x))),(e,a)=>{const i=c,_=m,h=f,g=v;return o(),l(g,{ref_key:"formRef",ref:w,model:n(y),rules:q,size:"large"},{default:r((()=>[s(_,{prop:"phone"},{default:r((()=>[s(i,{modelValue:n(y).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>n(y).phone=e),placeholder:"请输入手机号","prefix-icon":"Cellphone"},{prepend:r((()=>[d("+86")])),_:1},8,["modelValue"])])),_:1}),s(_,{prop:"code"},{default:r((()=>[t("div",V,[s(i,{modelValue:n(y).code,"onUpdate:modelValue":a[1]||(a[1]=e=>n(y).code=e),placeholder:"请输入验证码","prefix-icon":"Lock",onKeyup:u(j,["enter"])},null,8,["modelValue"]),s(h,{disabled:n(k)>0,onClick:C},{default:r((()=>[d(p(n(k)>0?`${n(k)} s`:"发送验证码"),1)])),_:1},8,["disabled"])])])),_:1}),s(_,null,{default:r((()=>[s(h,{type:"primary",style:{width:"100%"},onClick:j},{default:r((()=>[d("登录")])),_:1})])),_:1})])),_:1},8,["model"])}}},[["__scopeId","data-v-6b2c5bea"]]);export{y as default};
