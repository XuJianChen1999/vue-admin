import{aB as e,bL as a,aC as t,a$ as l,c5 as i,c6 as n,c as s,r as u,a as o,e as d,f as r,av as p,as as c,i as f,aW as m,aG as y,aw as g,j as v,h as S,aV as b,aU as x,at as w,au as h,E as _,bU as z,c7 as C}from"./.pnpm-B5NcQQUZ.js";import{N as B,d as I,_ as N,e as j}from"./index-9TLdUthr.js";function k(e){return B.post("/upload/image",e)}const V={disabled:{type:Boolean,default:!1},autoUpload:{type:Boolean,default:!1},action:{type:String,default:""},name:{type:String,default:"name"},data:{type:[Object,Function],default:()=>{}},showFileList:{type:Boolean,default:!0},limit:{type:Number,default:3},multiple:{type:Boolean,default:!0},borderRadius:{type:String,default:"4px"},title:{type:String,default:""},iconName:{type:String,default:"Plus"},iconType:{type:String,default:I.EL_ICON,validator:e=>[I.EL_ICON,I.SVG].includes(e)},iconSize:{type:[Number,String],default:18},height:{type:String,default:"148px"},width:{type:String,default:"148px"},customStyle:{type:Object,default:()=>{}}},F={...V,tip:{type:String,default:""},maxSize:{type:Number,default:10},round:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},api:Function,previewText:{type:String,default:"查看"},previewIcon:{type:String,default:"View"},deleteText:{type:String,default:"删除"},deleteIcon:{type:String,default:"Delete"}},L={...V,tag:{type:String,default:"button",validator:e=>["button","card"].includes(e)},accept:{type:String,default:""}},T={class:"upload-box"},U={class:"upload-empty"},$=["src"],E=["onClick"],O=["onClick"],M={class:"el-upload__tip"},D=N({__name:"index",props:e(F,{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(e){a((e=>({"9bc0ef02":g(L),"767a29f2":I.width,"8c6907f4":I.height})));const B=t(e,"modelValue"),I=e,N=l(i,void 0),V=l(n,void 0),F=s((()=>I.disabled||(null==N?void 0:N.disabled))),L=s((()=>{const e=I;return e.round?"50%":e.borderRadius})),D=u([]),G=u(""),R=u(!1);function q(e){const a=I,t=e.size/1024/1024<a.maxSize,l=a.accept.includes(e.type);return l?t?t&&l:_.warning(`图片大小不能超过${a.maxSize}MB`):_.warning("请选择正确的图片格式")}async function A(e){const a=new FormData,t=e.data||{};a.append(e.filename,e.file);for(const i in t)a.append(i,t[i]);try{const t=(null==I?void 0:I.api)||k,l=await t(a);e.onSuccess(l)}catch(l){e.onError(l)}}function P(e,a){e&&(a.url=e.url,B.value=D.value,(null==V?void 0:V.prop)&&(null==N||N.validateField([V.prop])),_.success("上传成功"))}function W(e,a){_.error("上传失败")}function H(){_.warning(`最多只能上传${I.limit}张图片`)}return o((()=>B.value),(e=>D.value=e)),(e,a)=>{const t=j,l=z,i=C;return d(),r("div",T,[p(l,{"file-list":g(D),"onUpdate:fileList":a[1]||(a[1]=e=>b(D)?D.value=e:null),action:"#",accept:"image/gif, image/jpeg, image/png","list-type":"picture-card",class:x(["upload",g(F)?"disabled":"",e.drag?"no-border":""]),multiple:!0,disabled:g(F),limit:e.limit,"http-request":A,"before-upload":q,"on-exceed":H,"on-success":P,"on-error":W,drag:e.drag},{file:c((({file:l})=>[f("img",{src:l.url,class:"upload-image"},null,8,$),f("div",{class:"upload-handle",onClick:a[0]||(a[0]=m((()=>{}),["stop"]))},[f("div",{class:"handle-icon",onClick:e=>function(e){G.value=e.url,R.value=!0}(l)},[p(t,{name:e.previewIcon},null,8,["name"]),f("span",null,y(e.previewText),1)],8,E),g(F)?v("",!0):(d(),r("div",{key:0,class:"handle-icon",onClick:e=>function(e){const a=D.value.filter((a=>a.url!==e.url||a.name!==e.name));D.value=a,B.value=a}(l)},[p(t,{name:e.deleteIcon},null,8,["name"]),f("span",null,y(e.deleteIcon),1)],8,O))])])),default:c((()=>[f("div",U,[S(e.$slots,"empty",{},(()=>[p(t,{name:e.iconName,type:e.iconType,size:e.iconSize},null,8,["name","type","size"]),f("p",null,y(e.title),1)]),!0)])])),_:3},8,["file-list","class","disabled","limit","drag"]),f("div",M,[S(e.$slots,"tip",{},(()=>[f("span",null,"大小不超过"+y(e.maxSize)+"M",1)]),!0)]),w(p(i,{"url-list":[g(G)],onClose:a[2]||(a[2]=e=>R.value=!1)},null,8,["url-list"]),[[h,g(R)]])])}}},[["__scopeId","data-v-ba145fa9"]]);export{D as U,L as u};
