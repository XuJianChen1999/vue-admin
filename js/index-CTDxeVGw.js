import{n as a,d as e,R as l,e as t,x as n}from"./index-CMBT9BYn.js";import{r as o,aA as r,a3 as s,a4 as i,a5 as m,a8 as p,aa as d,ak as u,ap as c,ao as h,aH as f,aS as y,bw as b,aq as v}from"./.pnpm-DSXWUmMM.js";import{u as w}from"./useModal-xs4tASz_.js";import _ from"./index-B4S_DUQr.js";import j from"./preview-meta-modal-CtcqYU_0.js";import"./index-BLiBxgox.js";import"./useForm-D-WJXbO_.js";const k={__name:"index",setup(k){const{visible:x,modalData:C,open:I}=w(),V=o([]),g=[{slot:"label",label:"菜单名称",showOverflowTooltip:!0},{slot:"type",label:"菜单类型"},{prop:"path",label:"路由path"},{prop:"name",label:"路由name"},{prop:"component",label:"组件路径"},{slot:"action",label:"查看meta说明"}].map((a=>({...a,align:"left"})));function A(a){return a.map((a=>({...a,component:a.component||a.path,label:a.meta.title,hasChildren:a.children&&a.children.length,children:a.children?A(a.children):null})))}return r((async()=>{const e=await a();V.value=A(e)})),(a,o)=>{const r=t,w=y,k=b,A=v,E=n;return s(),i(E,null,{default:m((()=>[p(d(_),{data:d(V),columns:d(g),border:!1,"tree-props":{children:"children",hasChildren:"hasChildren"},load:(a,e,l)=>l(a.children),"row-key":"name",lazy:""},{label:m((({item:a})=>[p(w,null,{default:m((()=>{var l;return[a.meta.icon?(s(),i(r,{key:0,name:a.meta.icon,type:(null==(l=a.meta)?void 0:l.iconType)||d(e).EL_ICON},null,8,["name","type"])):u("",!0),c(" "+h(a.label),1)]})),_:2},1024)])),type:m((({item:a})=>{var e;return[p(k,{effect:"plain",type:[d(l).LINK,d(l).IFRAME].includes(null==(e=a.meta)?void 0:e.type)?"warning":"success"},{default:m((()=>{var e,t;return[c(h((t=null==(e=a.meta)?void 0:e.type,{[l.LINK]:"外链",[l.IFRAME]:"内嵌"}[t]||"菜单")),1)]})),_:2},1032,["type"])]})),action:m((({item:a})=>[p(A,{type:"primary",icon:"View",link:"",onClick:e=>d(I)(a.meta)},{default:m((()=>[c("meta配置")])),_:2},1032,["onClick"])])),_:1},8,["data","columns","load"]),p(d(j),{modelValue:d(x),"onUpdate:modelValue":o[0]||(o[0]=a=>f(x)?x.value=a:null),meta:d(C)},null,8,["modelValue","meta"])])),_:1})}}};export{k as default};
