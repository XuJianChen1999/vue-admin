import{B as e,d as a,_ as t,e as l,x as i}from"./index-D91Jtym3.js";import{ai as n,bw as d,aj as o,aL as u,bE as s,bF as p,a2 as r,r as c,az as m,a3 as f,ae as y,a8 as g,a5 as v,af as b,aG as S,ao as _,aa as h,ak as w,a9 as x,aF as z,aE as V,a6 as k,a7 as I,E as N,bG as B,bH as C,a4 as F,ap as U,aq as j,aP as E,bv as L,bA as T}from"./.pnpm-BO0thPis.js";function O(a){return e.post("/upload/image",a)}const $={disabled:{type:Boolean,default:!1},autoUpload:{type:Boolean,default:!1},action:{type:String,default:""},name:{type:String,default:"name"},data:{type:[Object,Function],default:()=>{}},showFileList:{type:Boolean,default:!0},limit:{type:Number,default:3},multiple:{type:Boolean,default:!0},borderRadius:{type:String,default:"4px"},title:{type:String,default:""},iconName:{type:String,default:"Plus"},iconType:{type:String,default:a.EL_ICON,validator:e=>[a.EL_ICON,a.SVG].includes(e)},iconSize:{type:[Number,String],default:18},height:{type:String,default:"148px"},width:{type:String,default:"148px"},customStyle:{type:Object,default:()=>{}}},G={...$,tip:{type:String,default:""},maxSize:{type:Number,default:10},round:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},api:Function,previewText:{type:String,default:"查看"},previewIcon:{type:String,default:"View"},deleteText:{type:String,default:"删除"},deleteIcon:{type:String,default:"Delete"}},M={...$,tag:{type:String,default:"button",validator:e=>["button","card"].includes(e)},accept:{type:String,default:""}},R={class:"upload-box"},q={class:"upload-empty"},A=["src"],D=["onClick"],P=["onClick"],H={class:"el-upload__tip"},J=t({__name:"index",props:n(G,{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(e){d((e=>({"9bc0ef02":h(U),"767a29f2":t.width,"8c6907f4":t.height})));const a=o(e,"modelValue"),t=e,i=u(s,void 0),n=u(p,void 0),F=r((()=>t.disabled||(null==i?void 0:i.disabled))),U=r((()=>{const e=t;return e.round?"50%":e.borderRadius})),j=c([]),E=c(""),L=c(!1);function T(e){const a=t,l=e.size/1024/1024<a.maxSize,i=a.accept.includes(e.type);return i?l?l&&i:N.warning(`图片大小不能超过${a.maxSize}MB`):N.warning("请选择正确的图片格式")}async function $(e){const a=new FormData,l=e.data||{};a.append(e.filename,e.file);for(const t in l)a.append(t,l[t]);try{const l=(null==t?void 0:t.api)||O,i=await l(a);e.onSuccess(i)}catch(i){e.onError(i)}}function G(e,t){e&&(t.url=e.url,a.value=j.value,(null==n?void 0:n.prop)&&(null==i||i.validateField([n.prop])),N.success("上传成功"))}function M(e,a){N.error("上传失败")}function J(){N.warning(`最多只能上传${t.limit}张图片`)}return m((()=>a.value),(e=>j.value=e)),(e,t)=>{const i=l,n=B,d=C;return f(),y("div",R,[g(n,{"file-list":h(j),"onUpdate:fileList":t[1]||(t[1]=e=>z(j)?j.value=e:null),action:"#",accept:"image/gif, image/jpeg, image/png","list-type":"picture-card",class:V(["upload",h(F)?"disabled":"",e.drag?"no-border":""]),multiple:!0,disabled:h(F),limit:e.limit,"http-request":$,"before-upload":T,"on-exceed":J,"on-success":G,"on-error":M,drag:e.drag},{file:v((({file:l})=>[b("img",{src:l.url,class:"upload-image"},null,8,A),b("div",{class:"upload-handle",onClick:t[0]||(t[0]=S((()=>{}),["stop"]))},[b("div",{class:"handle-icon",onClick:e=>function(e){E.value=e.url,L.value=!0}(l)},[g(i,{name:e.previewIcon},null,8,["name"]),b("span",null,_(e.previewText),1)],8,D),h(F)?w("",!0):(f(),y("div",{key:0,class:"handle-icon",onClick:e=>function(e){const t=j.value.filter((a=>a.url!==e.url||a.name!==e.name));j.value=t,a.value=t}(l)},[g(i,{name:e.deleteIcon},null,8,["name"]),b("span",null,_(e.deleteIcon),1)],8,P))])])),default:v((()=>[b("div",q,[x(e.$slots,"empty",{},(()=>[g(i,{name:e.iconName,type:e.iconType,size:e.iconSize},null,8,["name","type","size"]),b("p",null,_(e.title),1)]),!0)])])),_:3},8,["file-list","class","disabled","limit","drag"]),b("div",H,[x(e.$slots,"tip",{},(()=>[b("span",null,"大小不超过"+_(e.maxSize)+"M",1)]),!0)]),k(g(d,{"url-list":[h(E)],onClose:t[2]||(t[2]=e=>L.value=!1)},null,8,["url-list"]),[[I,h(L)]])])}}},[["__scopeId","data-v-ba145fa9"]]),K={class:"upload-file"},Q={key:1},W={class:"el-upload__text"},X=t({__name:"file",props:M,setup(e){d((e=>({f56b8a24:a.width,"0a2e28ff":a.height,"46d551b6":a.borderRadius})));const a=e;return(e,a)=>{const t=j,i=l,n=B;return f(),y("div",K,[g(n,{drag:"card"===e.tag,disabled:e.disabled,"auto-upload":e.autoUpload,action:e.action,accept:e.accept,name:e.name,data:e.data,"show-file-list":e.showFileList,limit:e.limit,multiple:e.multiple},{default:v((()=>["button"===e.tag?(f(),F(t,{key:0,type:"primary",icon:e.iconName},{default:v((()=>[U(_(e.title||"点击上传"),1)])),_:1},8,["icon"])):(f(),y("div",Q,[g(i,{class:"el-icon--upload",name:e.iconName,size:e.iconSize,type:e.iconType},null,8,["name","size","type"]),b("div",W,_(e.title||"点击上传"),1)]))])),_:1},8,["drag","disabled","auto-upload","action","accept","name","data","show-file-list","limit","multiple"])])}}},[["__scopeId","data-v-ecdc1e0c"]]),Y={__name:"index",setup(e){const a=c([]),t=c([]),l=c([]);return(e,n)=>{const d=E,o=L,u=T,s=i;return f(),F(s,{title:"上传（时间原因，该组件暂未完全开发完成）"},{default:v((()=>[g(o,{shadow:"never",header:"上传图像示例"},{default:v((()=>[g(d,{size:30,wrap:""},{default:v((()=>[g(h(J),{modelValue:h(a),"onUpdate:modelValue":n[0]||(n[0]=e=>z(a)?a.value=e:null),action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15"},null,8,["modelValue"]),g(h(J),{modelValue:h(t),"onUpdate:modelValue":n[1]||(n[1]=e=>z(t)?t.value=e:null),icon:"Upload",title:"自定义标题和图标","icon-size":"36"},null,8,["modelValue"]),g(h(J),{modelValue:h(l),"onUpdate:modelValue":n[2]||(n[2]=e=>z(l)?l.value=e:null),round:"",title:"圆形样式"},null,8,["modelValue"])])),_:1})])),_:1}),g(o,{header:"上传文件示例",shadow:"never",class:"card-box"},{default:v((()=>[g(u,null,{default:v((()=>[g(h(X),{tag:"button",title:"button示例"})])),_:1}),g(u,null,{default:v((()=>[g(h(X),{tag:"card",title:"card示例"})])),_:1})])),_:1})])),_:1})}}};export{Y as default};
